<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/accesibilidad.css') }}">
    <title>{% block title %}AgroConnect{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        <style>
            .accesibilidad-bar {
                position: fixed;
                top: 0; left: 0; right: 0;
                z-index: 2000;
                background: #222;
                color: #fff;
                display: flex;
                gap: 10px;
                align-items: center;
                padding: 6px 10px;
                font-size: 1em;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            }
            .accesibilidad-bar button, .accesibilidad-bar select {
                background: #fff;
                color: #222;
                border: none;
                border-radius: 6px;
                padding: 4px 10px;
                margin-right: 4px;
                font-size: 1em;
                cursor: pointer;
            }
            .accesibilidad-bar button.active {
                background: #ffb300;
                color: #222;
            }
            .accesibilidad-bar label {
                margin-right: 4px;
            }
        </style>
</head>
<body>

  <div class="accesibilidad-overlay" id="accOverlay"></div>
  <button class="accesibilidad-toggle" id="accToggle" aria-label="Abrir menÃº de accesibilidad">
        â™¿
  </button>
    <div class="accesibilidad-panel" id="accPanel" role="dialog" aria-label="Panel de accesibilidad">
        <div class="panel-header">
            Accesibilidad
        </div>

        <div class="panel-content">
            <div class="control-group">
                <h3>TamaÃ±o de Texto</h3>
                <div class="control-row">
                    <button class="control-btn" id="disminuirLetraBtn" title="Disminuir letra">A-</button>
                    <button class="control-btn" id="aumentarLetraBtn" title="Aumentar letra">A+</button>
                </div>
            </div>

            <div class="control-group">
                <h3> Modos Visuales</h3>
                <div class="control-row">
                    <button class="control-btn" id="modoNocturnoBtn" title="Modo nocturno">ðŸŒ™</button>
                    <button class="control-btn" id="contrasteBtn" title="Alto contraste">ðŸ”³</button>
                    <button class="control-btn" id="grisesBtn" title="Escala de grises">ðŸŒ‘</button>
                    <button class="control-btn" id="guiaLecturaBtn" title="GuÃ­a de lectura">ðŸ“–</button>
                </div>
                <!-- Range slider para contraste -->
                <div class="control-row" style="margin-top: 8px;">
                    <label for="contrasteRange" style="font-size: 0.85rem; color: #555;">Intensidad de Contraste:</label>
                    <input type="range" id="contrasteRange" min="1" max="3" step="0.1" value="1" disabled style="width: 100%; accent-color: #FF6B6B;">
                </div>
            </div>

            <div class="control-group">
                <h3>TipografÃ­a</h3>
                <select class="control-select" id="tipografiaSelect" aria-label="Cambiar tipografÃ­a">
                    <option value="default">TipografÃ­a por defecto</option>
                    <option value="arial">Arial (Sans-serif)</option>
                    <option value="verdana">Verdana (Legible)</option>
                    <option value="comic">Comic Sans (Amigable)</option>
                    <option value="open">OpenDyslexic (Dislexia)</option>
                </select>
            </div>

            <div class="control-group">
                <h3>Audio</h3>
                <button class="control-btn special" id="lectorPantallaBtn">
                    <span id="lectorTexto">Leer PÃ¡gina</span>
                </button>
            </div>

            <div class="control-group">
                <button class="control-btn special" id="resetAccesibilidadBtn" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);">
                    Restablecer Todo
                </button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/accesibilidad.js') }}"></script>
    <script>
        
        const toggle = document.getElementById('accToggle');
        const panel = document.getElementById('accPanel');
        const overlay = document.getElementById('accOverlay');

        toggle.addEventListener('click', () => {
            toggle.classList.toggle('active');
            panel.classList.toggle('show');
            overlay.classList.toggle('show');
        });

        overlay.addEventListener('click', () => {
            toggle.classList.remove('active');
            panel.classList.remove('show');
            overlay.classList.remove('show');
        });

      
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && panel.classList.contains('show')) {
                toggle.classList.remove('active');
                panel.classList.remove('show');
                overlay.classList.remove('show');
            }
        });

       
        const lectorBtn = document.getElementById('lectorPantallaBtn');
        const lectorTexto = document.getElementById('lectorTexto');
        
        if(lectorBtn) {
            lectorBtn.addEventListener('click', function() {
                setTimeout(() => {
                    if(this.classList.contains('active')) {
                        lectorTexto.textContent = 'â¸ï¸ Detener Lectura';
                    } else {
                        lectorTexto.textContent = 'â–¶ï¸ Leer PÃ¡gina';
                    }
                }, 100);
            });
        }

        
        const resetBtn = document.getElementById('resetAccesibilidadBtn');
        if(resetBtn) {
            resetBtn.addEventListener('click', () => {
                if(confirm('Â¿Deseas restablecer todas las configuraciones de accesibilidad?')) {
                    localStorage.clear();
                    location.reload();
                }
            });
        }

        
        const observer = new MutationObserver(() => {
            if(document.body.classList.contains('night-mode')) {
                panel.classList.add('night-mode');
                document.querySelectorAll('.control-group').forEach(el => el.classList.add('night-mode'));
            } else {
                panel.classList.remove('night-mode');
                document.querySelectorAll('.control-group').forEach(el => el.classList.remove('night-mode'));
            }
        });
        
        observer.observe(document.body, { attributes: true, attributeFilter: ['class'] });
    </script>
</body>
</html>
